# JTR-131

- Date: 2026-03-02
- Scope: expand `/tickets` tabs navigation to all/board/calendar/map with URL state

## What changed

- Extended tickets page view model from 2 to 4 tabs:
  - `all`,
  - `board`,
  - `calendar`,
  - `map`.
- Updated URL query handling:
  - parses `view` values for all supported tabs,
  - persists active tab in query (`?view=...`) for deep-linking/navigation restore.
- Added tab counts:
  - all tickets count,
  - board tickets count,
  - calendar day-group count,
  - map tickets count.
- Added calendar panel to `/tickets`:
  - groups filtered tickets by date,
  - preserves shared filter/search behavior,
  - opens ticket detail on row click.
- Added map panel to `/tickets` by reusing `DispatchMapView` with current filtered ticket set and technician labels.
- Existing shared filter bar remains above tabs and applies across all views.
- Improved mobile tab usability:
  - tickets view tabs are now horizontally scrollable on narrow widths,
  - each tab keeps non-wrapping label/count to avoid compressed unreadable state.
- Refined tickets page composition:
  - moved view tabs out of the filters card into a dedicated block above the active content panel
    (`table`/`board`/`calendar`/`map`) for clearer hierarchy on desktop and mobile.

## Docs updated

- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`

## Files

- `apps/web/pages/tickets/index.vue`
- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`
- `docs/changelog/JTR-131.md`

## Verification

- `pnpm --filter @jtrack/web typecheck`
- `pnpm --filter @jtrack/web test -- stores/sync.spec.ts stores/location.spec.ts`
