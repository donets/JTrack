# JTR-126

- Date: 2026-03-02
- Scope: create `useTicketActivity` composable and wire ticket detail timeline to `ticketActivities`

## What changed

- Added `apps/web/composables/useTicketActivity.ts`:
  - subscribes to RxDB `ticketActivities` filtered by `ticketId` + active location,
  - subscribes to non-deleted `ticketComments`,
  - merges and sorts items by `createdAt` descending,
  - maps activity payloads into display-ready entries (`type`, `user`, `message`, `timestamp`, `icon`, `color`).
- Updated ticket detail page to use the new composable instead of inline timeline aggregation logic.
- Removed legacy status-change comment hack from status updates; timeline now relies on real activity records.
- Extended timeline UI types to support `assignment` and `created` event kinds plus optional visual metadata (`icon`, `color`).
- Updated `JTimeline` to render explicit color tokens and labels for new event kinds.

## Docs updated

- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`

## Files

- `apps/web/composables/useTicketActivity.ts`
- `apps/web/pages/tickets/[id].vue`
- `apps/web/components/ui/JTimeline.vue`
- `apps/web/types/ui.ts`
- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`
- `docs/changelog/JTR-126.md`

## Verification

- `pnpm --filter @jtrack/web typecheck`
