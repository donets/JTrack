# JTR-134

- Date: 2026-03-02
- Scope: add persisted ticket checklist model and API/sync contract support

## What changed

- Added `Ticket.checklist` JSON field to Prisma model with default empty array (`[]`).
- Added migration `20260302113000_ticket_checklist` for DB schema update.
- Extended shared schemas/types with `TicketChecklistItem` and checklist support on:
  - `Ticket`,
  - `CreateTicketInput`,
  - `UpdateTicketInput`.
- Updated tickets API service to persist checklist on create/update and normalize checklist payload in serialized responses.
- Updated sync service to include checklist in ticket pull/push upserts so checklist stays part of ticket document replication.
- Updated web storage/repository layer:
  - RxDB ticket schema supports checklist items,
  - offline `saveTicket` reads/writes checklist.

## Docs updated

- `docs/api-spec.yml`
- `docs/data-models.ts`
- `docs/db-schema.sql`
- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`

## Files

- `apps/api/prisma/schema.prisma`
- `apps/api/prisma/migrations/20260302113000_ticket_checklist/migration.sql`
- `apps/api/src/tickets/tickets.service.ts`
- `apps/api/src/sync/sync.service.ts`
- `packages/shared/src/schemas.ts`
- `apps/web/plugins/rxdb.client.ts`
- `apps/web/composables/useOfflineRepository.ts`
- `docs/api-spec.yml`
- `docs/data-models.ts`
- `docs/db-schema.sql`
- `docs/architecture.md`
- `docs/system-design.md`
- `docs/plans/ui-ux-plan.md`
- `docs/changelog/JTR-134.md`

## Verification

- `pnpm --filter @jtrack/api prisma:generate`
- `pnpm --filter @jtrack/shared build`
- `pnpm --filter @jtrack/api typecheck`
- `pnpm --filter @jtrack/web typecheck`
